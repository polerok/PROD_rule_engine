{
   "decisions":[
      {
         "conditions":{
            "note":"Základní zobrazení ikony chatu",
            "all":[
               {
                  "operator":"greaterThanInclusive",
                  "value":0,
                  "fact":"WDG_TIME_ON_PAGE_IN_SEC"
               },
               {
                  "operator":"lessThan",
                  "value":1.1,
                  "fact":"WDG_TIME_ON_PAGE_IN_SEC"
               },
               {
                  "operator":"notEqual",
                  "value":"OPEN",
                  "fact":"WDG_ROLLED"
               },
               {
                  "operator":"notEqual",
                  "value":"/osobni",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/kontakty",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/internet",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/internet/internet-do-kancelare",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/volani",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/telefony-a-zarizeni",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/individualni-nabidka",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/bezpecnost",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/moje-o2",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"chatCarControl",
                  "fact":"WDG_PACKAGE"
               },
               {
                  "operator":"notEqual",
                  "value":"PORUCHY_residentCare",
                  "fact":"WDG_PACKAGE"
               },
               {
                  "operator":"notEqual",
                  "value":"chatMO2commonLogin",
                  "fact":"WDG_PACKAGE"
               },
               {
                  "operator":"notEqual",
                  "value":"spolecnost.o2.cz",
                  "fact":"WDG_ENV_HOSTNAME"
               },
               {
                  "operator":"equal",
                  "value":"INIT",
                  "fact":"WDG_STATE"
               }
            ]
         },
         "event":{
            "params":{
               "actions":"[show_icon,update_context_param(\"WDG_ROUTING_SERVICE\",\"CHAT_ADDAI_BOT\")]"
            },
            "type":"list"
         }
      },
      {
         "conditions":{
            "note":"Skrytí ikony na vybraných webech",
            "all":[
               {
                  "operator":"greaterThanInclusive",
                  "value":2,
                  "fact":"WDG_TIME_ON_PAGE_IN_SEC"
               },
               {
                  "operator":"lessThan",
                  "value":3,
                  "fact":"WDG_TIME_ON_PAGE_IN_SEC"
               },
               {
                  "any":[
                     {
                        "operator":"equal",
                        "value":"INIT",
                        "fact":"WDG_STATE"
                     },
                     {
                        "operator":"equal",
                        "value":"FINAL",
                        "fact":"WDG_STATE"
                     }
                  ]
               },
               {
                  "operator":"matchRegex",
                  "value":".*tiskove-centrum.*",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               }
            ]
         },
         "event":{
            "params":{
               "actions":"[hide_icon,update_context_param(\"WDG_ROUTING_SERVICE\",\"CHAT_ADDAI_BOT\")]"
            },
            "type":"list"
         }
      },
      {
         "conditions":{
            "note":"Uložení parametru pro nezobrazení spokojenosti BD zákazníků nebo proaktivní scénáře",
            "all":[
               {
                  "operator":"notEqual",
                  "value":"OK",
                  "fact":"WDG_NO_FEEDBACK"
               },
               {
                  "operator":"equal",
                  "value":"CHAT_BD_BOT",
                  "fact":"WDG_ROUTING_SERVICE"
               }
            ]
         },
         "event":{
            "params":{
               "actions":"[update_context_param(\"WDG_NO_FEEDBACK\",\"OK\")]"
            },
            "type":"list"
         }
      },
      {
         "conditions":{
            "note":"Otevření widgetu na stránkách s TESU",
            "all":[
               {
                  "operator":"greaterThanInclusive",
                  "value":0,
                  "fact":"WDG_TIME_ON_PAGE_IN_SEC"
               },
               {
                  "operator":"lessThan",
                  "value":1.1,
                  "fact":"WDG_TIME_ON_PAGE_IN_SEC"
               },
               {
                  "operator":"notEqual",
                  "value":"OPEN",
                  "fact":"WDG_ROLLED"
               },
               {
                  "operator":"notEqual",
                  "value":"internal",
                  "fact":"WDG_AUTORIZATION"
               },
               {
                  "any":[
                     {
                        "operator":"equal",
                        "value":"PORUCHY_residentTesu",
                        "fact":"WDG_PACKAGE"
                     },
                     {
                        "operator":"equal",
                        "value":"/podpora/tesu-chat",
                        "fact":"WDG_ENV_LOCATION_PATHNAME"
                     }
                  ]
               },
               {
                  "any":[
                     {
                        "operator":"equal",
                        "value":"INIT",
                        "fact":"WDG_STATE"
                     },
                     {
                        "operator":"equal",
                        "value":"FINAL",
                        "fact":"WDG_STATE"
                     }
                  ]
               }
            ]
         },
         "event":{
            "params":{
               "actions":"[open_widget]"
            },
            "type":"list"
         }
      },
      {
         "conditions":{
            "note":"Zobrazení Spokojenosti - Byl požadavek vyřešen?",
            "all":[
               {
                  "operator":"equal",
                  "value":"chatEnded",
                  "fact":"lastAction"
               },
               {
                  "operator":"equal",
                  "value":"FINAL",
                  "fact":"WDG_STATE"
               },
               {
                  "operator":"notEqual",
                  "value":"OK",
                  "fact":"WDG_NO_FEEDBACK"
               }
            ]
         },
         "event":{
            "params":{
               "actions":"[write_form(\"Spokojenost_1\"),update_context_param(\"WDG_SHOW_CMB\",\"true\")]"
            },
            "type":"list"
         }
      },
      {
         "conditions":{
            "note":"Zobrazení Spokojenosti - Finál",
            "all":[
               {
                  "operator":"equal",
                  "value":"formSubmitted",
                  "fact":"lastAction"
               },
               {
                  "operator":"equal",
                  "value":"FINAL",
                  "fact":"WDG_STATE"
               },
               {
                  "operator":"equal",
                  "value":"OK",
                  "fact":"WDG_CONFIRM_SPOKO"
               },
               {
                  "operator":"notEqual",
                  "value":"true",
                  "fact":"WDG_HODNOCENI"
               }
            ]
         },
         "event":{
            "params":{
               "actions":"[write_form(\"Spokojenost\"),update_context_param(\"WDG_HODNOCENI\",\"true\")]"
            },
            "type":"list"
         }
      },
      {
         "conditions":{
            "note":"Zobrazení nabídky CMB, zákazník nebyl vyřešen",
            "all":[
               {
                  "operator":"equal",
                  "value":"formSubmitted",
                  "fact":"lastAction"
               },
               {
                  "operator":"equal",
                  "value":"FINAL",
                  "fact":"WDG_STATE"
               },
               {
                  "operator":"equal",
                  "value":"NOK",
                  "fact":"WDG_CONFIRM_SPOKO"
               },
               {
                  "operator":"notEqual",
                  "value":"true",
                  "fact":"WDG_HODNOCENI"
               }
            ]
         },
         "event":{
            "params":{
               "actions":"[write_form(\"Spokojenost_2\"),update_context_param(\"WDG_HODNOCENI\",\"true\")]"
            },
            "type":"list"
         }
      },
      {
         "conditions":{
            "note":"Zobrazení ikony po zavření widgetu s chatem",
            "all":[
               {
                  "operator":"equal",
                  "value":"chatClosed",
                  "fact":"lastAction"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/kontakty",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/internet",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/internet/internet-do-kancelare",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/volani",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/telefony-a-zarizeni",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/individualni-nabidka",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/bezpecnost",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/moje-o2",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"spolecnost.o2.cz",
                  "fact":"WDG_ENV_HOSTNAME"
               },
               {
                  "any":[
                     {
                        "operator":"equal",
                        "value":"FINAL",
                        "fact":"WDG-STATE"
                     },
                     {
                        "operator":"equal",
                        "value":"INIT",
                        "fact":"WDG_STATE"
                     }
                  ]
               },
               {
                  "operator":"notEqual",
                  "value":"chatCarControl",
                  "fact":"WDG_PACKAGE"
               }
            ]
         },
         "event":{
            "params":{
               "actions":"[show_icon,update_context_param(\"WDG_ROUTING_SERVICE\",\"CHAT_ADDAI_BOT\"),update_context_param(\"WDG_HODNOCENI\",\"false\")]"
            },
            "type":"list"
         }
      },
      {
         "conditions":{
            "note":"Zavření widgetu po ukončení na místech, kde není Spokojenost",
            "all":[
               {
                  "operator":"equal",
                  "value":"chatEnded",
                  "fact":"lastAction"
               },
               {
                  "operator":"equal",
                  "value":"FINAL",
                  "fact":"WDG_STATE"
               },
               {
                  "operator":"notEqual",
                  "value":"chatCarControl",
                  "fact":"WDG_PACKAGE"
               },
               {
                  "any":[
                     {
                        "operator":"equal",
                        "value":"CHAT_BD_BOT",
                        "fact":"WDG_ROUTING_SERVICE"
                     },
                     {
                        "operator":"equal",
                        "fact":"exponea_personal",
                        "value":"proa_spolu_30"
                     },
                     {
                        "operator":"equal",
                        "fact":"exponea_personal",
                        "value":"proa_spolu_60"
                     },
                     {
                        "operator":"equal",
                        "fact":"exponea_personal",
                        "value":"proa_tv_30"
                     },
                     {
                        "operator":"equal",
                        "fact":"exponea_personal",
                        "value":"proa_tv_60"
                     },
                     {
                        "operator":"equal",
                        "fact":"exponea_personal",
                        "value":"proa_hp_30"
                     },
                     {
                        "operator":"equal",
                        "fact":"exponea_personal",
                        "value":"proa_hp_60"
                     },
                     {
                        "operator":"equal",
                        "value":"OK",
                        "fact":"WDG_NO_FEEDBACK"
                     }
                  ]
               }
            ]
         },
         "event":{
            "params":{
               "actions":"[close_widget,show_icon,update_context_param(\"WDG_ROUTING_SERVICE\",\"CHAT_ADDAI_BOT\")]"
            },
            "type":"list"
         }
      },
      {
         "conditions":{
            "note":"Zavření widgetu po hodnocení spokojenosti",
            "all":[
               {
                  "operator":"equal",
                  "value":"formSubmitted",
                  "fact":"lastAction"
               },
               {
                  "operator":"equal",
                  "value":"FINAL",
                  "fact":"WDG_STATE"
               },
               {
                  "operator":"equal",
                  "value":"true",
                  "fact":"WDG_HODNOCENI"
               },
               {
                  "operator":"equal",
                  "value":"OPEN",
                  "fact":"WDG_ROLLED"
               }
            ]
         },
         "event":{
            "params":{
               "actions":"[close_widget,update_context_param(\"WDG_HODNOCENI\",\"false\"),update_context_param(\"WDG_CONFIRM_SPOKO\",\"false\"),show_icon]"
            },
            "type":"list"
         }
      },
      {
         "conditions":{
            "note":"Spuštění RES bota po kliku na widget",
            "all":[
               {
                  "operator":"equal",
                  "value":"chatStarted",
                  "fact":"lastAction"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/kontakty",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/internet",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/internet/internet-do-kancelare",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/volani",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/telefony-a-zarizeni",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/individualni-nabidka",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/bezpecnost",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"/podnikatele-a-firmy/moje-o2",
                  "fact":"WDG_ENV_LOCATION_PATHNAME"
               },
               {
                  "operator":"notEqual",
                  "value":"INTRA_HR",
                  "fact":"WDG_PACKAGE"
               },
               {
                  "operator":"notEqual",
                  "value":"CORP",
                  "fact":"WDG_CUSTOMER_REF_SEGMENT"
               },
               {
                  "operator":"notEqual",
                  "value":"GOV",
                  "fact":"WDG_CUSTOMER_REF_SEGMENT"
               },
               {
                  "operator":"notEqual",
                  "value":"chatCarControl",
                  "fact":"WDG_PACKAGE"
               },
               {
                  "operator":"notEqual",
                  "value":"spolecnost.o2.cz",
                  "fact":"WDG_ENV_HOSTNAME"
               },
               {
                  "any":[
                     {
                        "operator":"equal",
                        "value":"INIT",
                        "fact":"WIDGET-STATE"
                     },
                     {
                        "operator":"equal",
                        "value":"INIT",
                        "fact":"WDG_STATE"
                     }
                  ]
               }
            ]
         },
         "event":{
            "params":{
               "actions":"[update_context_param(\"WDG_ROUTING_SERVICE\",\"CHAT_ADDAI_BOT\"),open_chat]"
            },
            "type":"list"
         }
      },
      {
         "conditions":{
            "note":"Spuštění BD bota",
            "all":[
               {
                  "operator":"equal",
                  "value":"chatStarted",
                  "fact":"lastAction"
               },
               {
                  "operator":"equal",
                  "value":"INIT",
                  "fact":"WDG_STATE"
               },
               {
                  "any":[
                     {
                        "operator":"equal",
                        "value":"GOV",
                        "fact":"WDG_CUSTOMER_REF_SEGMENT"
                     },
                     {
                        "operator":"equal",
                        "value":"CORP",
                        "fact":"WDG_CUSTOMER_REF_SEGMENT"
                     },
                     {
                        "operator":"equal",
                        "value":"chatCarControl",
                        "fact":"WDG_PACKAGE"
                     }
                  ]
               }
            ]
         },
         "event":{
            "params":{
               "actions":"[update_context_param(\"WDG_ROUTING_SERVICE\",\"CHAT_BD_BOT\"), open_chat]"
            },
            "type":"list"
         }
      }
   ],
   "attributes":[
      {
         "type":"number",
         "name":"WDG_TIME_ON_PAGE_IN_SEC"
      },
      {
         "type":"string",
         "name":"WIDGET-STATE"
      },
      {
         "type":"string",
         "name":"WDG_ENV_LOCATION_PATHNAME"
      },
      {
         "type":"string",
         "name":"WDG_ENV_LANG"
      },
      {
         "type":"string",
         "name":"WDG_ENV_COUNTRYCODE"
      },
      {
         "type":"string",
         "name":"WDG_ENV_URL"
      },
      {
         "type":"string",
         "name":"WDG_ENV_OS"
      },
      {
         "type":"string",
         "name":"WDG_WELCOME"
      },
      {
         "type":"string",
         "name":"WDG_ENV_DEVICETYPE"
      },
      {
         "type":"string",
         "name":"WDG_ROUTING_SERVICE"
      },
      {
         "type":"string",
         "name":"openHours.isOpenedNow"
      },
      {
         "type":"string",
         "name":"isStandardOpenHours"
      },
      {
         "type":"string",
         "name":"wilBeOpenedInStandardHours"
      },
      {
         "type":"string",
         "name":"decidedRoutingServiceType"
      },
      {
         "type":"number",
         "name":"openHours.willBeOpenedNextMinutes"
      },
      {
         "type":"string",
         "name":"decidedRoutingService"
      },
      {
         "type":"number",
         "name":"stats.waitingInteractions"
      },
      {
         "type":"number",
         "name":"stats.expectedWaitingTime"
      },
      {
         "type":"string",
         "name":"actionType"
      },
      {
         "type":"string",
         "name":"lastMessage.content.text"
      },
      {
         "type":"string",
         "name":"lastAction"
      },
      {
         "type":"string",
         "name":"customDataOther"
      },
      {
         "type":"string",
         "name":"WDG_OPEN_CHAT"
      },
      {
         "type":"string",
         "name":"WDG_PACKAGE"
      },
      {
         "type":"string",
         "name":"WDG_SHOW_ICON"
      },
      {
         "type":"string",
         "name":"WDG_ABC_IS_RUNNING"
      },
      {
         "type":"string",
         "name":"WDG_CUSTOMER_REF_SEGMENT"
      },
      {
         "type":"string",
         "name":"i_mo2_sdk_va"
      },
      {
         "type":"string",
         "name":"WDG_STATE"
      },
      {
         "type":"string",
         "name":"lastMessage"
      },
      {
         "type":"string",
         "name":"exponea_air_bank"
      },
      {
         "type":"string",
         "name":"WDG_CLOSE"
      },
      {
         "type":"string",
         "name":"WDG_BOT_SPOKO"
      },
      {
         "type":"string",
         "name":"WDG_SHOW_CMB"
      }
   ],
   "name":"WidgetRuleEngineTest_NTT_UAT"
}
